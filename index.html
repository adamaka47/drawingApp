<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Drawing Mobile</title>

	<style>
		#canvas {
			position: absolute;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
		}
	</style>

</head>
<body>
	
	<canvas id="canvas"></canvas>


	<script>


		onRes()

		window.addEventListener('resize', onRes)


		function onRes() {
			const canvas = document.getElementById('canvas')
			if (screen.availWidth < 500) {



				canvas.width = 100
				canvas.height = 100

				chechH1()
				const ctx = canvas.getContext('2d')

				const lastCoords = new Object() // сюда будем записывать наши координаты, у которых св-во - идентификатор тапа

				canvas.addEventListener('touchstart', e => {
					for (const touchEl of e.changedTouches) {
						lastCoords[touchEl.identifier] = {x: touchEl.pageX, y: touchEl.pageY}
					}

				})

				canvas.addEventListener('touchmove', e => {

					for (const touchEl of e.changedTouches) {

						ctx.beginPath()

						ctx.moveTo(lastCoords[touchEl.identifier].x, lastCoords[touchEl.identifier].y)
						ctx.lineTo(touchEl.pageX, touchEl.pageY)

						const color = parseInt(Math.random() * 0xffffff).toString(16)


						ctx.strokeStyle = '#' + color

						ctx.stroke()

						lastCoords[touchEl.identifier] = {x: touchEl.pageX, y: touchEl.pageY}
					}
				})

				function onCancel() {
					for (const touchEl of e.changedTouches) {
						delete lastCoords[touchEl.identifier]
					}
				}

					function onResize() {

						if (screen.availWidth < 500) {
							canvas.width = window.innerWidth
							canvas.height = window.innerHeight

							return
						}
					}


				window.addEventListener('load', onResize)
				window.addEventListener('resize', onResize)
			} else {
				canvas.width = 0
				canvas.height = 0
				chechH1()
				const h1 = document.createElement('h1')
				h1.textContent = 'Поддерживаются только мобильные приложения'
				document.body.prepend(h1)
			}
		}

		function chechH1() {
			if (document.querySelector('h1')) {
				document.querySelector('h1').remove()
			}
		}


	</script>

</body>
</html>